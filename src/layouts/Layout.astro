---
import "../styles/global.css";

interface Props {
    title: string;
    description?: string;
    keywords?: string;
    ogImage?: string;
    canonicalURL?: string;
}

const {
    title,
    description = "Muhammad Yusuf — Fullstack Engineer spesialisasi di Flutter, Laravel, Go, dan teknologi web modern. Membangun aplikasi mobile dan web yang cepat, scalable, dan indah.",
    keywords = "Muhammad Yusuf, Fullstack Engineer, Flutter Developer, Laravel Developer, Go Developer, Web Developer, Mobile Developer, Portfolio, Indonesia",
    ogImage = "/yusuf.jpeg",
    canonicalURL = Astro.url.href,
} = Astro.props;

const siteName = "Muhammad Yusuf | Portfolio";
const twitterHandle = "@yusufdev";
---

<!doctype html>
<html lang="id" class="scroll-smooth">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta name="generator" content={Astro.generator} />

        <!-- ═══════════════════════════════════════ -->
        <!--               PRIMARY SEO               -->
        <!-- ═══════════════════════════════════════ -->
        <title>{title}</title>
        <meta name="description" content={description} />
        <meta name="keywords" content={keywords} />
        <meta name="author" content="Muhammad Yusuf" />
        <meta
            name="robots"
            content="index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1"
        />
        <link rel="canonical" href={canonicalURL} />

        <!-- ═══════════════════════════════════════ -->
        <!--              FAVICON / ICONS            -->
        <!-- ═══════════════════════════════════════ -->
        <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
        <link rel="icon" type="image/x-icon" href="/favicon.ico" />
        <link rel="apple-touch-icon" href="/favicon.svg" />
        <meta name="theme-color" content="#2563EB" />
        <meta name="msapplication-TileColor" content="#2563EB" />

        <!-- ═══════════════════════════════════════ -->
        <!--             OPEN GRAPH (OG)             -->
        <!-- ═══════════════════════════════════════ -->
        <meta property="og:type" content="website" />
        <meta property="og:url" content={canonicalURL} />
        <meta property="og:title" content={title} />
        <meta property="og:description" content={description} />
        <meta property="og:image" content={ogImage} />
        <meta
            property="og:image:alt"
            content="Muhammad Yusuf — Fullstack Engineer"
        />
        <meta property="og:site_name" content={siteName} />
        <meta property="og:locale" content="id_ID" />

        <!-- ═══════════════════════════════════════ -->
        <!--             TWITTER CARD               -->
        <!-- ═══════════════════════════════════════ -->
        <meta name="twitter:card" content="summary_large_image" />
        <meta name="twitter:site" content={twitterHandle} />
        <meta name="twitter:creator" content={twitterHandle} />
        <meta name="twitter:title" content={title} />
        <meta name="twitter:description" content={description} />
        <meta name="twitter:image" content={ogImage} />
        <meta
            name="twitter:image:alt"
            content="Muhammad Yusuf — Fullstack Engineer"
        />

        <!-- ═══════════════════════════════════════ -->
        <!--          JSON-LD STRUCTURED DATA        -->
        <!-- ═══════════════════════════════════════ -->
        <script
            type="application/ld+json"
            set:html={JSON.stringify({
                "@context": "https://schema.org",
                "@type": "Person",
                name: "Muhammad Yusuf",
                url: canonicalURL,
                image: ogImage,
                jobTitle: "Fullstack Engineer",
                description: description,
                knowsAbout: [
                    "Flutter",
                    "Laravel",
                    "Go",
                    "React",
                    "Node.js",
                    "PostgreSQL",
                    "MySQL",
                    "Docker",
                    "REST API",
                    "Mobile Development",
                    "Web Development",
                ],
                sameAs: [
                    "https://github.com/yusuf",
                    "https://linkedin.com/in/yusuf",
                ],
            })}
        />

        <!-- ═══════════════════════════════════════ -->
        <!--               FONTS                    -->
        <!-- ═══════════════════════════════════════ -->
        <link rel="preconnect" href="https://fonts.googleapis.com" />
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
        <link
            href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&family=Outfit:wght@400;500;600;700&display=swap"
            rel="stylesheet"
        />
    </head>
    <body
        class="bg-[#F8FAFC] text-slate-900 selection:bg-indigo-500/30 font-plus-jakarta"
    >
        <slot />
    </body>
</html>

<style is:global>
    :root {
        --primary: 37, 99, 235;
        --primary-glow: rgba(37, 99, 235, 0.15);
    }

    body {
        margin: 0;
        width: 100%;
        min-height: 100vh;
    }

    .font-outfit {
        font-family: "Outfit", sans-serif;
    }

    .font-plus-jakarta {
        font-family: "Plus Jakarta Sans", sans-serif;
    }

    /* Custom Scrollbar */
    ::-webkit-scrollbar {
        width: 10px;
    }
    ::-webkit-scrollbar-track {
        background: #f1f5f9;
    }
    ::-webkit-scrollbar-thumb {
        background: #cbd5e1;
        border-radius: 5px;
    }
    ::-webkit-scrollbar-thumb:hover {
        background: #94a3b8;
    }

    /* Animations */
    @keyframes float {
        0%,
        100% {
            transform: translateY(0);
        }
        50% {
            transform: translateY(-10px);
        }
    }

    @keyframes orbit {
        from {
            transform: rotate(0deg) translateX(110px) rotate(0deg);
        }
        to {
            transform: rotate(360deg) translateX(110px) rotate(-360deg);
        }
    }

    .animate-float {
        animation: float 3s ease-in-out infinite;
    }

    .orbiting-icon {
        position: absolute;
        top: 50%;
        left: 50%;
        margin-top: -20px;
        margin-left: -20px;
    }
    .bg-noise {
        background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E");
    }
</style>

<script>
    // Global Translation Handler
    window.addEventListener("langchange", (e: any) => {
        const lang = e.detail.lang;
        const elements = document.querySelectorAll("[data-en][data-id]");

        elements.forEach((el) => {
            const translation = el.getAttribute(`data-${lang}`);
            if (translation) {
                el.textContent = translation;
            }
        });
    });

    // Handle initial state if needed
    document.addEventListener("DOMContentLoaded", () => {
        const savedLang = localStorage.getItem("preferred-lang") || "en";
        if (savedLang !== "en") {
            window.dispatchEvent(
                new CustomEvent("langchange", { detail: { lang: savedLang } }),
            );
        }
    });
</script>
